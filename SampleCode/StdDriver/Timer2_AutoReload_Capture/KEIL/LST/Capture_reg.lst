C51 COMPILER V9.60.0.0   CAPTURE_REG                                                       05/11/2021 11:48:26 PAGE 1   


C51 COMPILER V9.60.0.0, COMPILATION OF MODULE CAPTURE_REG
OBJECT MODULE PLACED IN .\Output\Capture_reg.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\Capture_reg.c LARGE OMF2 OPTIMIZE(8,SPEED) BROWSE INCDIR(..\..\..\..\
                    -Library\Device\Include;..\..\..\..\Library\StdDriver\inc) DEBUG PRINT(.\LST\Capture_reg.lst) TABS(2) OBJECT(.\Output\Cap
                    -ture_reg.obj)

line level    source

   1          /*--------------------------------------------------------------------------------------------------------
             --*/
   2          /*                                                                                                        
             - */
   3          /* Copyright(c) 2021 Nuvoton Technology Corp. All rights reserved.                                        
             - */
   4          /*                                                                                                        
             - */
   5          /*--------------------------------------------------------------------------------------------------------
             --*/
   6          
   7          //********************************************************************************************************
             -***
   8          //  Website: http://www.nuvoton.com
   9          //  E-Mail : MicroC-8bit@nuvoton.com
  10          //********************************************************************************************************
             -***
  11          
  12          //********************************************************************************************************
             -***
  13          //  File Function: MUG51 TIMER 2 Capture function demo
  14          //********************************************************************************************************
             -***
  15          
  16          #include "MUG51.h"
  17          /**
  18           * @brief       Timer2  interrupt subroutine
  19           */
  20          void Capture_ISR(void) interrupt 12      // Vector @  0x63
  21          {
  22   1        unsigned char captemph,captempl;
  23   1      
  24   1      _push_(SFRS);
  25   1      
  26   1          SFRS = 1;
  27   1          if (CAPCON0&SET_BIT0)
  28   1          {
  29   2             captemph = C0H;
  30   2             captempl = C0L;
  31   2             clr_CAPCON0_CAPF0;
  32   2          }
  33   1          else if (CAPCON0&SET_BIT2)
  34   1          {
  35   2             captemph = C2H;
  36   2             captempl = C2L;
  37   2             clr_CAPCON0_CAPF2;
  38   2          }
  39   1          SFRS = 0;
  40   1      //    printf ("\n capture high byte = %BD", captemph);
  41   1      //    printf ("\n capture low byte = %BD", captempl);
  42   1          DISABLE_TIMER2_CAP0;
  43   1      
  44   1      _pop_(SFRS);
C51 COMPILER V9.60.0.0   CAPTURE_REG                                                       05/11/2021 11:48:26 PAGE 2   

  45   1      }
  46          
  47          
  48          void main (void) 
  49          {
  50   1      
  51   1          Enable_UART0_VCOM_printf();
  52   1      //    printf ("\n ML51 series capture demo." );
  53   1      /* Setting Multi function pin setting for GPIO toggle */ 
  54   1          MFP_P33_IC0;
  55   1          P33_INPUT_MODE;                          //Define P33 as IC0 input pin.
  56   1          ENABLE_P33_PULLUP;                       //Since check falling edge enalbe internal pull high function
             -.
  57   1          TIMER2_Capture(IC0,IC_GPIO,CaptureRising,2);
  58   1      
  59   1          MFP_P11_IC2;
  60   1          P11_INPUT_MODE;                          //Define P11 as IC2 input pin.
  61   1          ENABLE_P11_PULLUP;                       //Since check falling edge enalbe internal pull high function
             -.
  62   1          TIMER2_Capture(IC2,IC_GPIO,CaptureEither,7);;
  63   1      
  64   1          TIMER2_Capture_Interrupt(Enable);
  65   1          Global_Interrupt(Enable);
  66   1          while(1);
  67   1      }
  68          
  69          
  70          


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    163    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
   EDATA SIZE       =   ----    ----
   HDATA SIZE       =   ----    ----
   XDATA CONST SIZE =   ----    ----
   FAR CONST SIZE   =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
